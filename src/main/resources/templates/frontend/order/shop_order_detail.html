<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">

<head>
    <link href="/shop_19/css/bootstrap.css" rel="stylesheet" type="text/css" media="all"/>
    <link href="/shop_19/css/style.css" rel="stylesheet" type="text/css" media="all"/>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>通通給我健起來Give Me Gym Center</title>

    <link href="//fonts.googleapis.com/css?family=Poppins:300,400,400i,500,600,700&display=swap" rel="stylesheet">

    <!-- Template CSS -->
    <link rel="stylesheet" href="/shop_19/assets/css/style-starter.css">
</head>

<body>
<!--header-->
<header id="site-header" class="fixed-top">
    <div class="container">
        <nav class="navbar navbar-expand-lg stroke">
            <h1><a class="navbar-brand" href="/GiveMeGym/index">
                <span class="lnr lnr-bicycle"></span> Give Me Gym
            </a></h1>
            <button class="navbar-toggler  collapsed bg-gradient" type="button" data-toggle="collapse"
                    data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon fa icon-expand fa-bars"></span>
                <span class="navbar-toggler-icon fa icon-close fa-times"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="/GiveMeGym/index">首頁<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item @@about__active">
                        <a class="nav-link" href="/coach/list">私人教練</a>
                    </li>
                    <li class="nav-item @@classes__active">
                        <a class="nav-link" href="/frontend_course/listAll">團課課程</a>
                    </li>
                    <li class="nav-item @@contact__active">
                        <a class="nav-link" href="/shopAllProduct">線上商城</a>
                    </li>
                    <li class="nav-item @@contact__active">
                        <a class="nav-link" href="/frontend_faq/listAll">常見問題</a>
                    </li>
                    <li class="nav-item @@contact__active">
                        <a class="nav-link" id="memberCenterLink" href="/front_Member/memberData">會員中心</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/shopCart" id="toShopCart">
                            <span class="lnr lnr-cart"></span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
</header>
<!--/header-->

<section class="w3l-breadcrumb">
    <div class="breadcrumb-bg breadcrumb-bg-shop py-5">
        <div class="container py-lg-5 py-md-3">
            <h3 class="title-big text-center">商城購物</h3>
            <p class="mt-3">享受健身樂趣</p>
        </div>
    </div>
</section>


<div class="body-Content">
    <aside>
        <div class="side-bar">
            <div class="left-side">
                <h3 class="agileits-sear-head">會員專區</h3>
                <ul>
                    <li>
                        <a class="btn-outline-secondary" href="/front_Member/memberData">個人資料</a>
                    </li>
                    <li>
                        <a class="btn-outline-secondary" href="/front_Member/memberDataModify">資料修改</a>
                    </li>
                    <li>
                        <a class="btn-outline-secondary" href="/front_Member/modifyPassword">密碼修改</a>
                    </li>
                </ul>
            </div>
            <br>
            <div class="left-side">
                <h3 class="agileits-sear-head">預定課程</h3>
                <ul>
                    <li>
                        <a class="btn-outline-secondary" href="">團課課表</a>
                    </li>
                    <li>
                        <a class="btn-outline-secondary" href="">私人課表</a>
                    </li>
                </ul>
            </div>
            <br>
            <div class="left-side">
                <h3 class="agileits-sear-head">商城專區</h3>
                <ul>
                    <li>
                        <a class="btn-outline-secondary" href="/shopCart">購物車</a>
                    </li>
                    <li>
                        <a class="btn-outline-secondary" href="/memberOrderList">商城訂單查詢</a>
                    </li>
                </ul>
            </div>
        </div>

    </aside>

    <div class="shop-order">
        <section class="shop-order">
            <h1 class="shop-order-title">訂單查詢</h1>
            <div class="table-container">
                <table class="shop-order-table">
                    <thead class="shop-order">

                    <tr class="shop-order">
                        <th class="shop-order-th" style="text-align: center">訂單編號</th>
                        <th class="shop-order-th" style="text-align: center">訂單成立時間</th>
                        <th class="shop-order-th" style="text-align: center">訂單總金額</th>
                        <th class="shop-order-th" style="text-align: center">訂單狀態</th>
                        <th class="shop-order-th" style="text-align: center">訂單詳情</th>
                    </tr>
                    </thead>
                    <tbody class="shop-order" id="shopOrder">
                    <tr class="shop-order" th:each="order:${orders}">
                        <td class="shop-order orderId" th:text="${order.id}" style="text-align: center"></td>
                        <td class="shop-order" style="text-align: center"
                            th:text="${#temporals.format(order.createTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
                        <td class="shop-order" style="text-align: center" th:text="'$'+${order.totalPrice}"></td>
                        <td class="shop-order" style="text-align: center">
                              <span th:switch="${order.status}">
                                <span th:case="0">已取消</span>
                                <span th:case="1">已成立</span>
                                <span th:case="2">已退款</span>
                                <span th:case="3">已完成</span>
                                <span th:case="*" th:text="'狀態'"></span> <!-- 默認情況下不匹配任何選項，可以自定義默認值 -->
                              </span>
                        </td>
                        <td class="shop-order" style="text-align: center">
                            <button type="button" class="btn_modal viewDetails"
                                    th:onclick="'viewDetails(\'' + ${order.id} + '\')'">查看
                            </button>
                        </td>
                    </tr>
                    </tbody>

                </table>
            </div>
        </section>

        <div class="overlay">
            <article>
                <div class="detail-container">
                    <h2>訂單詳情</h2>
                    <br>
                    <table id="productDetailsTable">
                        <thead>
                        <tr>
                            <th>商品編號</th>
                            <th>商品名稱</th>
                            <th>數量</th>
                            <th>價格</th>
                            <th>商品總價</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>

                    <table id="orderDetailsTable" style="margin: 20px 0 20px 0">
                        <thead>
                        <tr>
                            <th>收件人</th>
                            <th>連絡電話</th>
                            <th>配送地址</th>
                            <th>訂單備註</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
                <button type="button" class="btn_modal_close">關閉</button>
            </article>
        </div>
    </div>
</div>

<style>
    td {
        text-align: unset;
    }

    .btn_modal {
        background-color: #ff0000;
        cursor: pointer;

        font-size: 13px;
        color: #fff;
        text-decoration: none;
        border: none;
        border-radius: 4px;
        text-transform: uppercase;
        padding: 13px;
        outline: none;
        letter-spacing: 1px;
        font-weight: 600;

        text-align: center;

        width: 60px;
    }

    button.btn_modal_close {
        background-color: #ff0000;
        cursor: pointer;

        font-size: 13px;
        color: #fff;
        text-decoration: none;
        border: none;
        border-radius: 4px;
        text-transform: uppercase;
        padding: 13px;
        outline: none;
        letter-spacing: 1px;
        font-weight: 600;

        text-align: center;

        width: 120px;
    }

    div.overlay {
        position: relative;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background-color: hsla(0, 0%, 0%, .5);

        display: none;
    }

    /* 元素 article 置中及基本樣式 */
    div.overlay > article {
        background-color: white;
        width: 90%;
        max-width: 800px;
        border-radius: 10px;
        box-shadow: 0 0 10px #ddd;
        padding: 10px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
</style>

<!-- footers 20 -->
<section class="w3l-footers-20">
    <div class="footers20">
        <div class="container">
            <div class="footers20-content">
                <div class="d-grid grid-col-4 grids-content">
                    <div class="column">
                        <h4>客服專區</h4>
                        <a>
                            <p>聯絡我們</p>
                            <p class="contact-mail mt-1"><span
                                    class="lnr lnr-envelope"></span>service_business@tibame.com</p>
                        </a>
                        <a href="tel:+1-2345-678-11">
                            <p class="contact-phone mt-2"><span class="lnr lnr-phone-handset"></span>
                                +1-2345-678-11
                            </p>
                        </a>
                        <a href="/frontend_faq/listAll">
                            <p> 常見問題</p>
                        </a>
                        <a href="/front_Employee/login">
                            <p>員工中心</p>
                        </a>
                    </div>
                    <div class="column">
                        <h4>師資團隊</h4>
                        <a href="/coach/list">
                            <p class="coach-list mt-2"><span class="lnr lnr-coach-handset"></span> 教練介紹
                            </p>
                        </a>
                        <a href="/frontend_course/listAll">
                            <p class="classes-list mt-2"><span class="lnr lnr-classes-handset"></span> 團課介紹
                            </p>
                        </a>
                    </div>

                    <div class="column">
                        <h4>商城</h4>
                        <a href="/shopAllProduct">
                            <p>瀏覽商品</p>
                        </a>

                    </div>
                    <div class="column">
                        <h4>營業時間</h4>
                        <p>We are working on</p>
                        <p class="mt-1"><span class="lnr lnr-clock"></span> <strong>Mon - Fri</strong> : 7am
                            to 9pm
                        </p>
                        <p class="mt-1"><span class="lnr lnr-clock"></span> <strong>Sat - Sun</strong> : 10
                            am to 8
                            pm
                        </p>
                        <p class="contact-map mt-2"><span class="lnr lnr-map-marker"></span>場館位置</p>

                        <iframe
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3617.2490359444073!2d121.22244777443302!3d24.957640341363774!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x346823ea50c732a5%3A0x1b5e6ee66e9fec49!2z57ev6IKyVGliYU1l6ZmE6Kit5Lit5aOi6IG36KiT5Lit5b-D!5e0!3m2!1szh-TW!2stw!4v1684388144187!5m2!1szh-TW!2stw"
                                width="280" height="200" style="border:0;" allowfullscreen="" loading="lazy"
                                referrerpolicy="no-referrer-when-downgrade"></iframe>

                    </div>
                </div>
                <div class="d-grid grid-col-3 grids-content1 bottom-border">
                    <div class="columns copyright-grid align-self">
                        <p class="copy-footer-29">© 2023 Workout | Designed by no.7 team</p>
                    </div>
                    <div class="columns text-lg-right social-grid">
                        <ul class="social">
                            <li><span class="fa fa-facebook" aria-hidden="true"></span></a>
                            </li>
                            <li><span class="fa fa-instagram" aria-hidden="true"></span></a>
                            </li>
                            <li><span class="fa fa-twitter" aria-hidden="true"></span></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- move top -->
    <button onclick="topFunction()" id="movetop" title="Go to top">
        &#10548;
    </button>
    <script>
        $(document).ready(function () {
            $('#memberCenterLink').click(function (event) {
                event.preventDefault(); // 防止點擊連結導致頁面跳轉

                // 檢查Session中是否有值
                if (sessionStorage.getItem('memberId')) {
                    // 如果有值，執行頁面跳轉
                    window.location.href = $(this).attr('href');
                } else {
                    // 如果沒有值，執行其他操作或顯示警告訊息
                    alert('請先登入會員');
                    window.location.href = '/front_Member/login';
                }
            });

            $('#toShopCart').click(function (event) {
                event.preventDefault(); // 防止點擊連結導致頁面跳轉

                // 檢查Session中是否有值
                if (sessionStorage.getItem('memberId')) {
                    // 如果有值，執行頁面跳轉
                    window.location.href = $(this).attr('href');
                } else {
                    // 如果沒有值，執行其他操作或顯示警告訊息
                    alert('請先登入會員');
                    window.location.href = '/front_Member/login';
                }
            });
        });
    </script>
    <script>
        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function () {
            scrollFunction()
        };

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                document.getElementById("movetop").style.display = "block";
            } else {
                document.getElementById("movetop").style.display = "none";
            }
        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
    </script>
    <!-- /move top -->
</section>


<script src="/shop_19/assets/js/jquery-3.3.1.min.js"></script>

<script th:inline="javascript">
    function viewDetails(orderId) {
        $.get('/orders/' + orderId + '/details', function (orderDetails) {
            // 清空表格内容
            $('#productDetailsTable tbody').empty();

            // 迭代处理订单详情列表
            $.each(orderDetails, function (index, detail) {
                // 创建新的行
                var row = $('<tr>');

                // 创建并添加每个单元格
                $('<td>').text(detail.productId).appendTo(row);
                $('<td>').text(detail.productName).appendTo(row);
                $('<td>').text(detail.quantity).appendTo(row);
                $('<td>').text(detail.price).appendTo(row);
                $('<td>').text(detail.quantity * detail.price).appendTo(row);

                // 将新行添加到表格
                row.appendTo('#productDetailsTable tbody');
            });
        }).fail(function (error) {
            console.error('Error:', error);
        });

        $.get('/orders/' + orderId, function (order) {
            // 清空表格内容
            $('#orderDetailsTable tbody').empty();

            var tbody = document.querySelector('#orderDetailsTable tbody');
            tbody.innerHTML = '';

            // Define the order of keys
            var keyOrder = ['name', 'phone', 'address', 'note'];

            // Create a new row
            var row = document.createElement('tr');

            // Iterate through the keyOrder array and add the corresponding values as cells in the row
            keyOrder.forEach(function (key) {
                var value = order[key];

                var cell = document.createElement('td');
                cell.textContent = value;

                row.appendChild(cell);
            });

            // Append the row to the table body
            tbody.appendChild(row);


        }).fail(function (error) {
            console.error('Error:', error);
        });


    }
</script>
<!-- libhtbox -->
<script src="/shop_19/assets/js/lightbox-plus-jquery.min.js"></script>

<script src="/shop_19/assets/js/owl.carousel.js"></script>
<!-- script for banner slider-->
<script>
    $(document).ready(function () {
        $('.owl-one').owlCarousel({
            loop: true,
            margin: 0,
            nav: false,
            responsiveClass: true,
            autoplay: false,
            autoplayTimeout: 5000,
            autoplaySpeed: 1000,
            autoplayHoverPause: false,
            responsive: {
                0: {
                    items: 1,
                    nav: false
                },
                480: {
                    items: 1,
                    nav: false
                },
                667: {
                    items: 1,
                    nav: true
                },
                1000: {
                    items: 1,
                    nav: true
                }
            }
        })
    })
</script>
<!-- //script -->

<!-- script for tesimonials carousel slider -->
<script>
    $(document).ready(function () {
        $(".owl-two").owlCarousel({
            loop: true,
            margin: 20,
            nav: false,
            responsiveClass: true,
            responsive: {
                0: {
                    items: 1,
                    nav: false
                },
                768: {
                    items: 2,
                    nav: false
                },
                1000: {
                    items: 3,
                    nav: false,
                    loop: false
                }
            }
        })
    })
</script>
<!-- //script for tesimonials carousel slider -->

<script>
    $(document).ready(function () {
        $('.owl-carousel-posts').owlCarousel({
            loop: true,
            margin: 0,
            responsiveClass: true,
            autoplay: true,
            autoplayTimeout: 2000,
            autoplaySpeed: 1000,
            autoplayHoverPause: true,
            responsive: {
                0: {
                    items: 2,
                    nav: false
                },
                480: {
                    items: 3,
                    nav: true,
                    margin: 0
                },
                736: {
                    items: 4,
                    nav: true,
                    margin: 0
                },
                1000: {
                    items: 5,
                    nav: true,
                    margin: 0
                }
            }
        })
    })
</script>
<!-- /slider -->

<!-- script for teams1-->
<script>
    $(document).ready(function () {
        $('.owl-carousel').owlCarousel({
            loop: true,
            margin: 0,
            responsiveClass: true,
            responsive: {
                0: {
                    items: 1,
                    nav: true
                },
                400: {
                    items: 2,
                    nav: true,
                    margin: 20
                },
                1000: {
                    items: 4,
                    nav: true,
                    loop: true,
                    margin: 25
                }
            }
        })
    })
</script>
<!-- //script for teams1-->


<!-- stats number counter-->
<script src="/shop_19/assets/js/jquery.waypoints.min.js"></script>
<script src="/shop_19/assets/js/jquery.countup.js"></script>
<script>
    $('.counter').countUp();
</script>
<!-- //stats number counter -->

<!-- disable body scroll which navbar is in active -->
<script>
    $(function () {
        $('.navbar-toggler').click(function () {
            $('body').toggleClass('noscroll');
        })
    });
</script>
<!-- disable body scroll which navbar is in active -->

<!--/MENU-JS-->
<script>
    $(window).on("scroll", function () {
        var scroll = $(window).scrollTop();

        if (scroll >= 80) {
            $("#site-header").addClass("nav-fixed");
        } else {
            $("#site-header").removeClass("nav-fixed");
        }
    });

    //Main navigation Active Class Add Remove
    $(".navbar-toggler").on("click", function () {
        $("header").toggleClass("active");
    });
    $(document).on("ready", function () {
        if ($(window).width() > 991) {
            $("header").removeClass("active");
        }
        $(window).on("resize", function () {
            if ($(window).width() > 991) {
                $("header").removeClass("active");
            }
        });
    });
</script>
<!--//MENU-JS-->

<script src="/shop_19/assets/js/bootstrap.min.js"></script>


<script>
    // 開啟 Modal 彈跳視窗
    $("button.btn_modal").on("click", function () {
        $("div.overlay").fadeIn(function () {
            $(window).scrollTop($("div.overlay").offset().top);
        });
    });


    // 關閉 Modal
    $("button.btn_modal_close, div.overlay").on("click", function (e) {
        $("div.overlay").fadeOut();
        topFunction();
    });


    $("div.overlay > article").on("click", function (e) {
        e.stopPropagation();
    });

</script>

<script>
    $(document).ready(function () {

        $('#viewDetails').click(function () {
            var orderId = $('#orderId').text();
            console.log(orderId);
            $.ajax({
                url: '/orders/' + orderId + '/details',
                type: 'GET',
                success: function (details) {
                    var tableBody = $('#productDetailsTable tbody');

                    details.forEach(function (detail) {
                        var priceSum = detail.price * detail.quantity;
                        var row = '<tr>' +
                            '<td>' + detail.productId + '</td>' +
                            '<td>' + detail.productName + '</td>' +
                            '<td>' + detail.quantity + '</td>' +
                            '<td>' + detail.price + '</td>' +
                            '<td>' + priceSum + '</td>' +
                            '</tr>';

                        tableBody.innerHTML = row;
                    });
                },
                error: function () {
                    console.log('Error occurred during AJAX request.');
                }
            });
        })
    });
</script>

</body>

</html>